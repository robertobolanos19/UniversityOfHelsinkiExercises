{"ast":null,"code":"var _jsxFileName = \"/Users/rb/Desktop/FullstackCourse/UniversityOfHelsinkiExercises/part3/phonebookFrontend/src/App.js\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect } from 'react';\nimport personServices from './services/persons';\nimport Filter from './components/Filter';\nimport Form from './components/Form';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  //*persons data\n  const [persons, setPersons] = useState([]);\n  //*search filter\n  const [newFilter, setNewFilter] = useState('');\n  //*new person\n  const [newName, setNewName] = useState('');\n  //*phone numbers\n  const [newPhoneNumber, setNewPhoneNumber] = useState('');\n  //*notifications\n  const [notification, setNotification] = useState(null);\n  //*notification type: success,error\n  const [notifType, setNotifType] = useState(null);\n  useEffect(() => {\n    personServices.getAll().then(initialPersons => {\n      setPersons(initialPersons);\n    });\n  });\n  const inputRef = useRef();\n  const handleSubmit = e => {\n    e.preventDefault();\n    inputRef.current.select();\n\n    //on submission a new person object is created \n    const nameObject = {\n      name: newName,\n      number: newPhoneNumber\n    };\n    if (persons.map(p => p.name).includes(newName)) {\n      window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`) && personServices.update(persons.filter(p => p.name === newName)[0].id, nameObject).then(response => {\n        personServices.getAll().then(response => {\n          setPersons(response);\n          setNewName('');\n          setNewPhoneNumber('');\n          setNotifType(null);\n          setNotification(`Changed ${nameObject.name}'s number`);\n          setTimeout(() => {\n            setNotification(null);\n          }, 5000);\n        });\n      }).catch(error => {\n        setNotifType('error');\n        setNotification(`${newName} was already removed from server`);\n        setTimeout(() => {\n          setNotifType(null);\n          setNotification(null);\n        }, 5000);\n        setPersons(persons.filter(n => n.name !== newName));\n      });\n      return;\n    }\n    personServices.create(nameObject).then(returnedPerson => {\n      setPersons(persons.concat(returnedPerson));\n      setNewName('');\n      setNewPhoneNumber('');\n      setNotifType(null);\n      setNotification(`Added ${returnedPerson.name}`);\n      setTimeout(() => {\n        setNotification(null);\n      }, 5000);\n    });\n  };\n  const handleFilter = e => setNewFilter(e.target.value);\n  const handleNameInput = e => {\n    setNewName(e.target.value);\n  };\n  const handleNumInput = e => {\n    setNewPhoneNumber(e.target.value);\n  };\n  const deletePerson = person => {\n    window.confirm(`Delete ${person.name}?`) && personServices.deletePerson(person.id);\n  };\n\n  //end of handlers\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Notification, {\n      message: notification,\n      type: notifType\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      handleFilter: handleFilter,\n      value: newFilter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      handleSubmit: handleSubmit,\n      handleNameInput: handleNameInput,\n      handleNumInput: handleNumInput,\n      inputRef: inputRef,\n      newName: newName,\n      newPhoneNumber: newPhoneNumber\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Persons, {\n      persons: persons,\n      newFilter: newFilter,\n      del: deletePerson\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"LgklRMAXzZ8zVzu0UjDrfvKYraE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useRef","useEffect","personServices","Filter","Form","Persons","Notification","App","persons","setPersons","newFilter","setNewFilter","newName","setNewName","newPhoneNumber","setNewPhoneNumber","notification","setNotification","notifType","setNotifType","getAll","then","initialPersons","inputRef","handleSubmit","e","preventDefault","current","select","nameObject","name","number","map","p","includes","window","confirm","update","filter","id","response","setTimeout","catch","error","n","create","returnedPerson","concat","handleFilter","target","value","handleNameInput","handleNumInput","deletePerson","person"],"sources":["/Users/rb/Desktop/FullstackCourse/UniversityOfHelsinkiExercises/part3/phonebookFrontend/src/App.js"],"sourcesContent":["import { useState, useRef, useEffect } from 'react'\n\nimport personServices from './services/persons'\nimport Filter from './components/Filter'\nimport Form from './components/Form'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\n\n\nconst App = () => {\n\n  //*persons data\n  const [persons, setPersons] = useState([])\n  //*search filter\n  const [newFilter, setNewFilter] = useState('')\n  //*new person\n  const [newName, setNewName] = useState('')\n  //*phone numbers\n  const [newPhoneNumber, setNewPhoneNumber] = useState('')\n  //*notifications\n  const [notification, setNotification] = useState(null)\n  //*notification type: success,error\n  const [notifType, setNotifType] = useState(null)\n\n  useEffect(()=>{\n  personServices.getAll()\n  .then(initialPersons =>{\n    setPersons(initialPersons)\n  })\n  })\n\n  const inputRef = useRef()\n\n  const handleSubmit = (e)=>{\n    e.preventDefault()\n\n    inputRef.current.select()\n    \n    //on submission a new person object is created \n    const nameObject = \n    {\n      name:newName,\n      number:newPhoneNumber\n    }  \n\n    if(persons.map((p)=>p.name).includes(newName))\n    {\n      window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`) &&\n      personServices\n      .update(persons.filter(p=>p.name === newName)[0].id, nameObject)\n      .then(response =>{\n        personServices.getAll()\n        .then(response =>{\n          setPersons(response)\n          setNewName('')\n          setNewPhoneNumber('')\n          setNotifType(null)\n          setNotification(`Changed ${nameObject.name}'s number`)\n          setTimeout(()=>{\n            setNotification(null)\n          },5000)\n        })\n      })\n      .catch(error =>{\n        setNotifType('error')\n        setNotification(`${newName} was already removed from server`)\n        setTimeout(()=>{\n          setNotifType(null)\n          setNotification(null)\n        },5000)\n        setPersons(persons.filter(n=>n.name !== newName))\n      })\n      \n      return\n    }\n\n      personServices.create(nameObject)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewPhoneNumber('')\n        setNotifType(null)\n        setNotification(`Added ${returnedPerson.name}`)\n        setTimeout(()=>{\n          setNotification(null)\n        },5000)\n      })\n  }\n\n  const handleFilter = (e)=> setNewFilter(e.target.value)\n  \n  const handleNameInput = (e)=>{\n    setNewName(e.target.value)\n  }\n\n  const handleNumInput = (e)=>{\n    setNewPhoneNumber(e.target.value)\n  }\n\n  const deletePerson = (person) => {\n    window.confirm(`Delete ${person.name}?`)&&personServices.deletePerson(person.id)\n  }\n\n  //end of handlers\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} type={notifType}/>\n      <Filter handleFilter={handleFilter} value={newFilter}/>\n      <h3>Add a new</h3>\n      <Form \n        handleSubmit={handleSubmit} \n        handleNameInput={handleNameInput} \n        handleNumInput={handleNumInput}\n        inputRef={inputRef}\n        newName={newName}\n        newPhoneNumber={newPhoneNumber}\n      />\n      <h3>Numbers</h3>\n      <Persons persons={persons} newFilter={newFilter} del={deletePerson}/>\n      \n    </div>\n  )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}