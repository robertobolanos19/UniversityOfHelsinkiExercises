{"ast":null,"code":"import _slicedToArray from\"/Users/rb/Desktop/FullstackCourse/part3/phonebookFrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useRef,useEffect}from'react';import personServices from'./services/persons';import Filter from'./components/Filter';import Form from'./components/Form';import Persons from'./components/Persons';import Notification from'./components/Notification';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){//persons data\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];//search filter\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newFilter=_useState4[0],setNewFilter=_useState4[1];//new person\nvar _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newName=_useState6[0],setNewName=_useState6[1];//phone numbers\nvar _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newPhoneNumber=_useState8[0],setNewPhoneNumber=_useState8[1];//notifications\nvar _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),notification=_useState10[0],setNotification=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),notifType=_useState12[0],setNotifType=_useState12[1];//use effect is being used to get data\nuseEffect(function(){personServices.getAll()//if found it will skim through each item\n.then(function(initialPersons){//the values from response.data each time its returned is being sent to setPersons\nsetPersons(initialPersons);});},[]);//end of useEffect\n//useRef\nvar inputRef=useRef();//end useRef\n//handlers\nvar handleSubmit=function handleSubmit(e){e.preventDefault();inputRef.current.select();//on submission a new person object is created \nvar nameObject={name:newName,number:newPhoneNumber};if(persons.map(function(p){return p.name;}).includes(newName)){window.confirm(\"\".concat(newName,\" is already added to the phonebook, replace the old number with a new one?\"))&&personServices.update(persons.filter(function(p){return p.name===newName;})[0].id,nameObject).then(function(response){personServices.getAll().then(function(response){setPersons(response);setNewName('');setNewPhoneNumber('');setNotifType(null);setNotification(\"Changed \".concat(nameObject.name,\"'s number\"));setTimeout(function(){setNotification(null);},5000);});}).catch(function(error){setNotifType('error');setNotification(\"\".concat(newName,\" was already removed from server\"));setTimeout(function(){setNotifType(null);setNotification(null);},5000);setPersons(persons.filter(function(n){return n.name!==newName;}));});return;}personServices.create(nameObject).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setNewName('');setNewPhoneNumber('');setNotifType(null);setNotification(\"Added \".concat(returnedPerson.name));setTimeout(function(){setNotification(null);},5000);});};var handleFilter=function handleFilter(e){return setNewFilter(e.target.value);};var handleNameInput=function handleNameInput(e){//e.target.value is the value being put into the form\nsetNewName(e.target.value);};var handleNumInput=function handleNumInput(e){//e.target.value is the value being put into the form\nsetNewPhoneNumber(e.target.value);};var deletePerson=function deletePerson(person){window.confirm(\"Delete \".concat(person.name,\"?\"))&&personServices.deletePerson(person.id);};//end of handlers\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:notification,type:notifType}),/*#__PURE__*/_jsx(Filter,{handleFilter:handleFilter,value:newFilter}),/*#__PURE__*/_jsx(\"h3\",{children:\"Add a new\"}),/*#__PURE__*/_jsx(Form,{handleSubmit:handleSubmit,handleNameInput:handleNameInput,handleNumInput:handleNumInput,inputRef:inputRef,newName:newName,newPhoneNumber:newPhoneNumber}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{persons:persons,newFilter:newFilter,del:deletePerson})]});};export default App;","map":{"version":3,"names":["useState","useRef","useEffect","personServices","Filter","Form","Persons","Notification","App","persons","setPersons","newFilter","setNewFilter","newName","setNewName","newPhoneNumber","setNewPhoneNumber","notification","setNotification","notifType","setNotifType","getAll","then","initialPersons","inputRef","handleSubmit","e","preventDefault","current","select","nameObject","name","number","map","p","includes","window","confirm","update","filter","id","response","setTimeout","catch","error","n","create","returnedPerson","concat","handleFilter","target","value","handleNameInput","handleNumInput","deletePerson","person"],"sources":["/Users/rb/Desktop/FullstackCourse/part3/phonebookFrontend/src/App.js"],"sourcesContent":["import { useState, useRef, useEffect } from 'react'\n\nimport personServices from './services/persons'\n\nimport Filter from './components/Filter'\nimport Form from './components/Form'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\n\n\nconst App = () => {\n\n  //persons data\n  const [persons, setPersons] = useState([])\n  //search filter\n  const [newFilter, setNewFilter] = useState('')\n  //new person\n  const [newName, setNewName] = useState('')\n  //phone numbers\n  const [newPhoneNumber, setNewPhoneNumber] = useState('')\n  //notifications\n  const [notification, setNotification] = useState(null)\n  const [notifType, setNotifType] = useState(null)\n\n\n  //use effect is being used to get data\n  useEffect(()=>{\n  personServices.getAll()\n  //if found it will skim through each item\n  .then(initialPersons =>{\n    //the values from response.data each time its returned is being sent to setPersons\n    setPersons(initialPersons)\n  })\n  },[])\n  //end of useEffect\n\n  //useRef\n  const inputRef = useRef()\n  //end useRef\n\n\n  //handlers\n\n  const handleSubmit = (e)=>{\n    e.preventDefault()\n\n    inputRef.current.select()\n    \n    //on submission a new person object is created \n    const nameObject = \n    {\n      name:newName,\n      number:newPhoneNumber\n    }  \n\n    if(persons.map((p)=>p.name).includes(newName))\n    {\n      window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`) &&\n      personServices\n      .update(persons.filter(p=>p.name === newName)[0].id, nameObject)\n      .then(response =>{\n        personServices.getAll()\n        .then(response =>{\n          setPersons(response)\n          setNewName('')\n          setNewPhoneNumber('')\n          setNotifType(null)\n          setNotification(`Changed ${nameObject.name}'s number`)\n          setTimeout(()=>{\n            setNotification(null)\n          },5000)\n        })\n      })\n      .catch(error =>{\n        setNotifType('error')\n        setNotification(`${newName} was already removed from server`)\n        setTimeout(()=>{\n          setNotifType(null)\n          setNotification(null)\n        },5000)\n        setPersons(persons.filter(n=>n.name !== newName))\n      })\n      \n      return\n    }\n\n      personServices.create(nameObject)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewPhoneNumber('')\n        setNotifType(null)\n        setNotification(`Added ${returnedPerson.name}`)\n        setTimeout(()=>{\n          setNotification(null)\n        },5000)\n      })\n  }\n\n  const handleFilter = (e)=> setNewFilter(e.target.value)\n  \n  const handleNameInput = (e)=>{\n    //e.target.value is the value being put into the form\n    setNewName(e.target.value)\n  }\n\n  const handleNumInput = (e)=>{\n    //e.target.value is the value being put into the form\n    setNewPhoneNumber(e.target.value)\n  }\n\n  const deletePerson = (person) => {\n    window.confirm(`Delete ${person.name}?`)&&personServices.deletePerson(person.id)\n  }\n\n  //end of handlers\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} type={notifType}/>\n      <Filter handleFilter={handleFilter} value={newFilter}/>\n      <h3>Add a new</h3>\n      <Form \n        handleSubmit={handleSubmit} \n        handleNameInput={handleNameInput} \n        handleNumInput={handleNumInput}\n        inputRef={inputRef}\n        newName={newName}\n        newPhoneNumber={newPhoneNumber}\n      />\n      <h3>Numbers</h3>\n      <Persons persons={persons} newFilter={newFilter} del={deletePerson}/>\n      \n    </div>\n  )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}